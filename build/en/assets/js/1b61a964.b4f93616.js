"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[189],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,h=u["".concat(s,".").concat(m)]||u[m]||c[m]||i;return n?a.createElement(h,o(o({ref:t},d),{},{components:n})):a.createElement(h,o({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3956:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],l={id:"server-side-sdk",title:"Server side API",description:"Insert Logora server side with our API"},s=void 0,p={unversionedId:"installation/server-side-sdk",id:"installation/server-side-sdk",title:"Server side API",description:"Insert Logora server side with our API",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/installation/api.md",sourceDirName:"installation",slug:"/installation/server-side-sdk",permalink:"/en/installation/server-side-sdk",draft:!1,tags:[],version:"current",frontMatter:{id:"server-side-sdk",title:"Server side API",description:"Insert Logora server side with our API"},sidebar:"docs",previous:{title:"Wordpress installation",permalink:"/en/installation/wordpress"},next:{title:"Google AMP SDK",permalink:"/en/installation/amp-sdk"}},d={},u=[{value:"Retrieving the debate summary code",id:"retrieving-the-debate-summary-code",level:3},{value:"Query",id:"query",level:4},{value:"Response",id:"response",level:4},{value:"Retrieving the list of articles (advanced usage)",id:"retrieving-the-list-of-articles-advanced-usage",level:3},{value:"Query",id:"query-1",level:4},{value:"Response",id:"response-1",level:4}],c={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"retrieving-the-debate-summary-code"},"Retrieving the debate summary code"),(0,i.kt)("p",null,"Logora provides an API route to retrieve the debate summary server side. This API route returns the full HTML code of the debate summary (including CSS and scripts), that you can insert into your page template. This method replaces the insertion of the Logora script in your pages."),(0,i.kt)("p",null,"To get a more detailed documentation of this API, go to the ",(0,i.kt)("a",{parentName:"p",href:"https://render.logora.fr/docs"},"Documentation")," page."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"This API is also used by the Logora Javascript code to display the debate summary.")),(0,i.kt)("h4",{id:"query"},"Query"),(0,i.kt)("p",null,"Base URL :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://render.logora.fr/synthesis")," for the debate summary"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://render.logora.fr/widget")," for the widget")),(0,i.kt)("p",null,"Method : ",(0,i.kt)("inlineCode",{parentName:"p"},"POST"),(0,i.kt)("br",{parentName:"p"}),"\n","Header : ",(0,i.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,i.kt)("p",null,"URL parameters :",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},"shortname")," (required): name of your application available in your administration panel\\\n",(0,i.kt)("inlineCode",{parentName:"p"},"uid")," (required): unique page identifier (it is the same identifier that is inserted on the client side)\\\n",(0,i.kt)("inlineCode",{parentName:"p"},"device")," (optional) : user screen size. Possible choices are : ",(0,i.kt)("inlineCode",{parentName:"p"},"mobile"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"tablet"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"desktop"),". This parameter is used to make the module responsive.\\\n",(0,i.kt)("inlineCode",{parentName:"p"},"insertType")," (optional) : insertion mode, do not add in case of standard insertion. Indicate ",(0,i.kt)("em",{parentName:"p"},"amp")," for an insertion on an AMP page or ",(0,i.kt)("em",{parentName:"p"},"iframe")," for an insertion in iframe.  "),(0,i.kt)("p",null,"Request body: The request body must contain metadata about the page, in JSON format."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "source": \n  {\n    "source_url": "https://yourwebsite.com/article", // (Required) Canonical URL of the page\n    "uid": "a3f4e033-9e13-4abb-be11-2d87a2294013", // (Required) Unique identifier of the page\n    "title": Title of the article", // (Required) Title of the page\n    "description": "Page description", // (Optional) Page description\n    "origin_image_url": "https://image.com/image.png", // (Optional) URL of the page image\n    "published_date": "2020-12-01T12:00:00+01:00", // ((Required) Date of publication of the page in ISO_8601 format\n    "publisher": "Your website", // (Optional) Site name\n    "tag_objects": [  // (Optional) Tags of the article as an array of objects\n        { \n          "name": "politique",  // (Required) Displayed name of the tag\n          "uid": "politique-001" // (Optional) Unique identifier of the label. Can be omitted if the names are already unique\n        }, \n        { \n          "name": "health", \n          "uid": "health-003" \n        },\n    ]\n  }\n}\n')),(0,i.kt)("p",null,"Examples of query URLs:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://render.logora.fr/app?shortname=demo-app&uid=cc7c1624-9d5c-4206-b2d4-d18cb36c59d6\nhttps://render.logora.fr/app?shortname=demo-app&uid=cc7c1624-9d5c-4206-b2d4-d18cb36c59d6&insertType=amp\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"source_url")," parameter must have a domain name identical to one of the authorized domains of your application (editable in ",(0,i.kt)("em",{parentName:"p"},"Configuration > General"),"), otherwise the source sent will not be taken into account.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"For performance reasons, sources published before January 1st 2019 are not taken into account.")),(0,i.kt)("h4",{id:"response"},"Response"),(0,i.kt)("p",null,"The response returned follows this format:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": true, // true if a debate is associated, false if no debate or an error\n  "debate": {    \n    "slug": "my-debate",    // Unique identifier of the debate, present in the URL\n    "name": "Should proportional representation be introduced in the election of deputies?",     // Debate title\n    "direct_url": "https://exemple.com/debate-space/debate/my-debate"      // Link to the debate\n  },\n  "content": CODE_HTML, // HTML code of the debate summary to insert in the page. Attribute not present if success is false\n  "config": OBJET_CONFIG, // Object containing the application configuration\n}\n')),(0,i.kt)("p",null,"The returned HTML code has the following container at its root: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<div id="logoraRoot" class="logoraContainer" lang="fr" data-id="synthesis"><div>\n')),(0,i.kt)("h3",{id:"retrieving-the-list-of-articles-advanced-usage"},"Retrieving the list of articles (advanced usage)"),(0,i.kt)("p",null,"In order to avoid making unnecessary calls and to load the debate summary only on the pages where a debate is linked, you can use the route provided by the Logora API to retrieve the list of articles linked to a debate."),(0,i.kt)("h4",{id:"query-1"},"Query"),(0,i.kt)("p",null,"Base URL :\n",(0,i.kt)("inlineCode",{parentName:"p"},"https://app.logora.fr/api/v1/updated_sources")),(0,i.kt)("p",null,"Method : ",(0,i.kt)("inlineCode",{parentName:"p"},"GET"),"\nHeader : ",(0,i.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json"),"\nURL parameters : "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"shortname")," (required): name of your application available in your administration panel"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"timestamp")," required): date from which you want to retrieve article updates (if a debate is associated or not), in Unix timestamp format (seconds)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"page")," (optional): page number"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"per_page")," (optional) : number of items per page, by default 10")),(0,i.kt)("p",null,"The route returns the set of items that have had an association change to a debate since the date passed in parameter."),(0,i.kt)("h4",{id:"response-1"},"Response"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": true,\n  "data": {\n      {\n        "identifier": 1, //  Unique identifier of the article that you provide when inserting the debate summary\n        "title": "Sample Article \u2013 Demo", // Title of the article\n        "source_url": "https://demo.logora.fr/article-demo", // URL of the article\n        "has_debate": false, //  Indicates if the article is associated with a debate\n        "debate_updated_at": "2021-01-06T16:01:19.717Z" // Last modification of the association to a debate (association to a debate or removal of the association)\n      },\n      {\n        "identifier": 2,\n        "title": "Sample Article 2 \u2013 Demo",\n        "source_url": "https://demo.logora.fr/article2-demo",\n        "has_debate": true,\n        "debate_updated_at": "2021-01-06T15:22:32.630Z"\n      }, \n      ...\n  }\n}\n')),(0,i.kt)("p",null,"Response headers:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"total")," : total number of items (not including pagination)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"total-pages")," : number of pages in the response")))}m.isMDXComponent=!0}}]);