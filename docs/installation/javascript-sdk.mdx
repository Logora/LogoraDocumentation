---
id: javascript-sdk
title: Installation Javascript
description: Installez Logora gr√¢ce √† notre code universel Javascript.
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Logora peut √™tre install√© sur n'importe quel site en ins√©rant le code natif JavaScript. Cette documentation est √† destination des d√©veloppeurs. Logora propose √©galement une documentation personnalis√©e pour l'[installation Wordpress](../wordpress).

L'installation en Javascript se fait en deux temps :
1. Ins√©rer l'espace de d√©bat 
2. Ins√©rer la synth√®se du d√©bat sur vos pages articles
	 
### Avant de commencer 

- Si l'√©quipe Logora ne vous a pas cr√©√© d'espace d'administration, cr√©ez votre espace d'administration Logora : [Inscription](https://admin.logora.fr/#/signup)
- Munissez-vous de votre **nom d'application** disponible sur votre [espace d'administration](https://admin.logora.fr) dans l'onglet *Configuration > G√©n√©ral*.
- Autorisez les domaines sur lesquels vous d√©sirez installer Logora. Pour cela, rendez-vous sur votre espace d'administration dans l'onglet *Configuration > G√©n√©ral > S√©curit√© > Domaines autoris√©s*. Par exemple, si le code ins√©r√© sur la page √† l'URL *https://exemple.com/article/exemple-article*, ajoutez le domaine *https://exemple.com*. Exemple : *http://localhost:3000* , *http://sous-domaine.exemple.com*.  Important : l'ajout des domaines sur l'espace d'administration fonctionne comme un ajout de tag, n'oubliez pas d'appuyer sur "Entrer" lors de l'insertion de vos URL.

### 1. Installer l'espace de d√©bat 


L'espace de d√©bat est la plateforme principale o√π vos utilisateurs pourront participer aux d√©bats. L'espace de d√©bat est ins√©r√© sur une page d√©di√©e sur votre site. 


Prenons l'exemple d'un site web disponible √† l'adresse *https://votresite.com*. L'√©diteur du site web souhaite acc√©der √† l'espace de d√©bat via l'adresse *https://votresite.com/espace-debat*. Voici les √©tapes √† suivre pour ins√©rer l'espace de d√©bat :

#### 1.1. Ajouter une page pour ins√©rer l'espace de d√©bat


Cr√©ez une page d√©di√©e o√π sera ins√©r√© l'espace de d√©bat. Cette page est disponible √† l'adresse *https://votresite.com/espace-debat*. Le pr√©fixe 'espace-debat' est le pr√©fixe par d√©faut. Il est modifiable dans l'espace d'administration.


#### 1.2. Ins√©rer le code JavaScript et vos variables de configuration


Ins√©rez les scripts n√©cessaires √† l'espace de d√©bat ainsi qu'un conteneur **logora_app**. 

Le conteneur **logora_app** est l'endroit o√π l'espace de d√©bat est affich√©.

Code standard √† copier/coller et compl√©ter : 

```html
<!-- Ins√©rer les scripts suivants dans la balise <head>, le plus haut possible dans la page -->
<script>
    // Variables de configuration, le nom d'application est pr√©sent dans votre espace d'administration
    var logora_config = {
        shortname: "NOM_APPLICATION"
    };
</script>
<script src="https://cdn.logora.com/debat.js"></script>
```

```html
<!-- Ins√©rer cette balise l√† o√π l'espace de d√©bat doit √™tre affich√© -->
<div id="logora_app"></div>
```

#### 1.3. R√©√©criture des URLs pour les routes de l'espace de d√©bat

Cette √©tape permet aux utilisateurs d'acc√©der √† l'espace de d√©bat directement depuis leur navigateur. 
Par exemple, si un utilisateur souhaite acc√©der directement √† son profil via l'URL *https://www.votresite.com/espace-debat/utilisateur/votre-profil*, sans proc√©der √† la r√©√©criture des URLs, il sera redirig√© vers une page d'erreur. 

La r√©√©criture des URLs permet √©galement √† l'√©quipe Logora de rajouter directement de nouveaux modules sur de nouvelles URLs de votre site sans vous demander d'intervenir. 

Utilisez la r√©√©criture d'URL sur votre plateforme ou CMS pour que les chemins commen√ßant par 'espace-debat/' (ou le pr√©fixe que vous avez choisi) pointent vers la page o√π est ins√©r√© l'espace de d√©bat.

Acc√©dez √† la page *https://votresite.com/espace-debat/debats*. Vous √™tes sur la page d'accueil de l'espace de d√©bat !

Pour modifier le pr√©fixe et les chemins d'URLs des pages de l'espace de d√©bat, rendez-vous sur [la configuration des chemins d'URL](configuration/routes.md).


### 2. Installer le bloc contributif dans vos articles 

> Si avez des contraintes de performance √©lev√© et que vous souhaitez indexer les pages de d√©bat sur les moteurs de recherche, il est n√©cessaire d'ins√©rer ce bloc c√¥t√© serveur. Dans ce cas rendez-vous sur la page d'[installation c√¥t√© serveur](installation/api.md).

Ins√©rez le code Javascript √† l'endroit o√π vous souhaitez voir appara√Ætre les appels √† l'action (commentaires, questions de  d√©bats ou de consultations). Ce bloc est souvent ins√©r√© apr√®s l'article mais il peut √™tre ajout√© en coeur d'article si certaines contraintes vous interdisent d'ajouter de nouvelles fonctionnalit√©s apr√®s l'article. Ceci est un exemple de code Javascript qui charge et affiche le bloc dans votre article. Il doit √™tre ins√©r√© sur toutes vos pages d'articles. 

#### 2.1 Ins√©rer le code JavaScript

Le conteneur **logora_embed** est l'endroit o√π le bloc est charg√©.

Code standard √† copier/coller et compl√©ter :

```
<div class="logora_embed" data-object-id="logora_config"></div>
<script>
    // Variables de configuration
    var logora_config = {
        shortname: "NOM_APPLICATION", // Nom d'application pr√©sent dans votre espace d'administration
        resource: {
            name: "synthese",
            id: "PAGE_IDENTIFIER" // Identifiant unique de la page
        }
    };

    (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://cdn.logora.com/embed.js';
        (d.head || d.body).appendChild(s);
    })();
</script>
```

**resource.id (requis)** : identifiant unique li√© √† la page. Cet identifiant doit √™tre unique pour chaque page o√π est ins√©r√© le bloc. Il permettra de r√©cup√©rer l'appel contributif correspondant √† la page. Par exemple, l'identifiant peut √™tre l'ID dans votre base de donn√©es de l'article pr√©sent sur la page, ou un slug unique ('exemple-identifiant').

> Pour des raisons de performance, les articles publi√©s il y a plus de 18 mois ne sont pas r√©cup√©r√©s. La synth√®se ne s'affichera pas.

Pour cr√©er un d√©bat li√© √† la page, allez dans l'espace d'administration > cr√©er un d√©bat en s√©lectionnant l'article concern√© dans la liste des derniers articles r√©cup√©r√©s. 

#### 2.2 Configurer l'appel √† l'action que vous souhaitez

Changer le contenu de l'objet *resource* vous permet de sp√©cifier ce que vous souhaitez ins√©rer dans l'article. 

Le name indique par d√©faut la valeur "synthese". 

```
 resource: {
            name: "synthese",
            id: "PAGE_IDENTIFIER" // Identifiant unique de la page
        }
```

Vous pouvez explorer dans les Tabs suivantes toutes les possibilit√©s d'affichage que propose l'objet resource. 

<Tabs>
  <TabItem value="Synthese" label="Synthese" default>
    La valeur synthese est la valeur par d√©faut qui est utilis√© dans la tr√®s grande majorit√© des cas par nos partenaires. L'ID est l'identifiant de l'article. Synthese permet d'afficher une question de d√©bat lorsqu'un d√©bat est li√© √† l'article comme ici : 
![Marianne synthesis](https://github.com/Logora/LogoraDocumentation/blob/87c76acdd92b559ddd59a145e32abe4c5d8e6075/static/img/synthese.png)

Si aucun d√©bat n'est li√© √† l'article, vous pouvez d√©cider d'afficher des commentaires √† la place, en autorisant l'ajout dans commentaires dans la configuration de l'espace d'administration. 

#### Permettre l'ajout de commentaires lorsqu'aucun d√©bat n'est li√© √† l'article (optionnel)

Vous pouvez activer un espace de commentaires sur votre espace contributif depuis votre espace d'administration *Configuration > Modules*.

Voici [une vid√©o](https://www.loom.com/share/f36e14002c3a456f85aed8484f9fb7ed) d√©mo concernant l'installation des commentaires et les visuels propos√©s aux lecteurs. 

![Capture d‚ÄôeÃÅcran 2024-06-21 aÃÄ 10 13 19](https://github.com/Logora/LogoraDocumentation/assets/28570918/529423a0-eaf6-4736-8174-64c3c303b9b4)

Par d√©faut, cela activera un bandeau simple pr√©sentant un appel √† l'action "Vous souhaitez r√©agir √† cet article ? Commentez".

Un [exemple sur Marianne ici.](https://www.marianne.net/agora/avis-aux-lecteurs-rejoignez-notre-espace-logora-et-devenez-le-debatteur-a-suivre)

![Capture d‚ÄôeÃÅcran 2024-06-21 aÃÄ 10 15 43](https://github.com/Logora/LogoraDocumentation/assets/28570918/bb31dd2b-b7f6-46c3-8757-b7dbbccdf186)

Pour g√©n√©rer davantage d'interactions, vous pouvez choisir de pr√©senter les meilleurs commentaires en plus de l'appel √† l'action (1, 2 ou 3). 
Cette option est √† favoriser si vous avez la possibilit√© de donner plus de place aux commentaires. 

Un exemple sur Milenio avec 3 commentaires affich√©s : 

![Capture d‚ÄôeÃÅcran 2024-06-21 aÃÄ 10 17 46](https://github.com/Logora/LogoraDocumentation/assets/28570918/c8a9421a-0c03-471b-9641-d12fb444ec31)

Un comportement recommand√© : ils affichent le nombre de commentaires en haut de l'article avec la possibilit√© de cliquer sur l'ic√¥ne commenter ce qui permet de descendre automatiquement vers les commentaires.

![Capture d‚ÄôeÃÅcran 2024-06-21 aÃÄ 10 18 10](https://github.com/Logora/LogoraDocumentation/assets/28570918/eabed076-0667-42d6-b89f-584c89202bc0)

  </TabItem>
  <TabItem value="Widget" label="Widget">
   ```
 resource: {
            name: "widget",
            id: "PAGE_IDENTIFIER" // Identifiant unique de la page
        }
```
 Ce code propose la m√™me chose que synth√®se mais la question de d√©bat s'affiche avec un format en une ligne. L'ID est l'identifiant de l'article.

  </TabItem>
  <TabItem value="Commentaires" label="Commentaires">
    This is a banana üçå
  </TabItem>
 <TabItem value="Vote" label="Vote">
    This is a banana üçå
  </TabItem>
 <TabItem value="Group" label="Group">
    This is a banana üçå
  </TabItem>
 <TabItem value="Consultation" label="Consultation">
    This is a banana üçå
  </TabItem>
 <TabItem value="Argument & proposition" label="Argument & proposition">
    This is a banana üçå
  </TabItem>
</Tabs>

#### 2.3 Envoyer les m√©ta-donn√©es des articles manuellement (optionnel)

Par d√©faut, Logora r√©cup√®re les m√©ta-donn√©es des articles automatiquement :
- via les balises html _meta_
- via le format JSON-LD

Cependant vous pouvez choisir de les envoyer manuellement avec les variables de configuration.

Voici un exemple de meta-donn√©es envoy√©es depuis les variables de configuration :

```javascript
    // Variables de configuration
    var logora_config = {
	shortname: "NOM_APPLICATION", // Nom d'application pr√©sent dans votre espace d'administration
	debate: {
	    identifier: "PAGE_IDENTIFIER" // Identifiant unique de la page
	},
	source: {
	    source_url: "https://votresite.com/article", // URL canonique de la page
	    uid: "a3f4e033-9e13-4abb-be11-2d87a2294013", // Identifiant unique de la page
	    title: "Titre de l'article", // Titre de la page
	    description: "Description de la page", // Description de la page
	    origin_image_url: "https://image.com/image.png", // URL de l'image de la page
	    published_date: "2020-12-01T12:00:00+01:00", // Date de publication de la page au format ISO_8601
	    publisher: "Mon site", // Nom du site
	    tag_objects: [  // √âtiquettes de l'article sous forme de tableau d'objets
		{ 
		  name: "politique",  // Nom affich√© de l'√©tiquette
		  uid: "politique-001" // Identifiant unique de l'√©tiquette. Peut √™tre omis si les noms sont d√©j√† uniques
		}, 
		{ 
		  name: "sant√©", 
		  uid: "sante-003" 
		},
	    ]
	  }
    };
```

Il n'est pas obligatoire d'envoyer toutes les m√©ta-donn√©es manuellement, les champs manquants seront r√©cup√©r√©s automatiquement. Les m√©tadonn√©es envoy√©es manuellement ont la priorit√© sur les donn√©es r√©cup√©r√©es automatiquement.


#### √âcouter le chargement de la synth√®se (optionnel)

Pour d√©tecter le chargement de la synth√®se, un √©v√©nement _logoraContentLoaded_ est d√©clench√© sur l'objet _window_.
Cet √©v√©nement permet de r√©cup√©rer des informations sur le contenu qui s'affiche sur la page.

```javascript
window.addEventListener('logoraContentLoaded', event => console.log(event.detail));
```
Format de l'objet _event.detail_ :
```
debate: {
  id: 1000,
  name: "Faut-il changer la constitution ?", // Titre de la consultation ou de l'article pour les commentaires
  slug: "mon-debat",
  direct_url: "https://www.exemple.fr/espace-debat/debat/mon-debat",
  created_at: "2023-03-16T09:36:31.204Z",
  image_url: "https://image.com/debate",
  type: "Group", // "Source" pour les commentaires, "Consultation" pour les consultations
  contributions_count: 12 // Seulement pour les commentaires, nombre de commentaires
}
```
Si aucun d√©bat n'est associ√© √† la page, l'objet _debate_ sera _null_.

Il ne reste plus qu'√† impl√©menter l'authentification unique et √† personnaliser Logora pour lancer votre premier d√©bat. 
