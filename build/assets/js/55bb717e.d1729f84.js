"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[397],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>v});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),p=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,v=u["".concat(o,".").concat(m)]||u[m]||c[m]||s;return a?n.createElement(v,i(i({ref:t},d),{},{components:a})):n.createElement(v,i({ref:t},d))}));function v(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,i=new Array(s);i[0]=m;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<s;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2397:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var n=a(7462),r=a(3366),s=(a(7294),a(3905)),i=["components"],l={id:"javascript-sdk",title:"Installation Javascript",description:"Installez Logora gr\xe2ce \xe0 notre code universel Javascript."},o=void 0,p={unversionedId:"installation/javascript-sdk",id:"installation/javascript-sdk",title:"Installation Javascript",description:"Installez Logora gr\xe2ce \xe0 notre code universel Javascript.",source:"@site/docs/installation/javascript-sdk.md",sourceDirName:"installation",slug:"/installation/javascript-sdk",permalink:"/installation/javascript-sdk",draft:!1,tags:[],version:"current",frontMatter:{id:"javascript-sdk",title:"Installation Javascript",description:"Installez Logora gr\xe2ce \xe0 notre code universel Javascript."},sidebar:"docs",previous:{title:"Pour commencer",permalink:"/"},next:{title:"Installation Wordpress",permalink:"/installation/wordpress"}},d={},u=[{value:"Avant de commencer",id:"avant-de-commencer",level:3},{value:"1. Installer l&#39;espace de d\xe9bat",id:"1-installer-lespace-de-d\xe9bat",level:3},{value:"1.1. Ajouter une page pour ins\xe9rer l&#39;espace de d\xe9bat",id:"11-ajouter-une-page-pour-ins\xe9rer-lespace-de-d\xe9bat",level:4},{value:"1.2. Ins\xe9rer le code JavaScript et vos variables de configuration",id:"12-ins\xe9rer-le-code-javascript-et-vos-variables-de-configuration",level:4},{value:"1.3. R\xe9\xe9criture des URLs pour les routes de l&#39;espace de d\xe9bat",id:"13-r\xe9\xe9criture-des-urls-pour-les-routes-de-lespace-de-d\xe9bat",level:4},{value:"2. Installer la synth\xe8se du d\xe9bat",id:"2-installer-la-synth\xe8se-du-d\xe9bat",level:3},{value:"2.1 Ins\xe9rer le code JavaScript et vos variables de configuration",id:"21-ins\xe9rer-le-code-javascript-et-vos-variables-de-configuration",level:4},{value:"2.2 Envoyer les m\xe9ta-donn\xe9es des articles manuellement (optionnel)",id:"22-envoyer-les-m\xe9ta-donn\xe9es-des-articles-manuellement-optionnel",level:4},{value:"\xc9couter le chargement de la synth\xe8se (optionnel)",id:"\xe9couter-le-chargement-de-la-synth\xe8se-optionnel",level:4}],c={toc:u};function m(e){var t=e.components,a=(0,r.Z)(e,i);return(0,s.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"Logora peut \xeatre install\xe9 sur n'importe quel site en ins\xe9rant le code natif JavaScript. Cette documentation est \xe0 destination des d\xe9veloppeurs. Logora propose \xe9galement une documentation personnalis\xe9e pour l'",(0,s.kt)("a",{parentName:"p",href:"installation/wordpress"},"installation Wordpress"),"."),(0,s.kt)("p",null,"L'installation en Javascript se fait en deux temps :"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Ins\xe9rer l'espace de d\xe9bat "),(0,s.kt)("li",{parentName:"ol"},"Ins\xe9rer la synth\xe8se du d\xe9bat sur vos pages\n")),(0,s.kt)("h3",{id:"avant-de-commencer"},"Avant de commencer"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Si l'\xe9quipe Logora ne vous a pas cr\xe9\xe9 d'espace d'administration, cr\xe9ez votre espace d'administration Logora : ",(0,s.kt)("a",{parentName:"li",href:"https://logora.fr/signup"},"Inscription")),(0,s.kt)("li",{parentName:"ul"},"Munissez-vous de votre ",(0,s.kt)("strong",{parentName:"li"},"nom d'application")," disponible sur votre ",(0,s.kt)("a",{parentName:"li",href:"https://admin.logora.fr"},"espace d'administration")," dans l'onglet ",(0,s.kt)("em",{parentName:"li"},"Configuration > G\xe9n\xe9ral"),"."),(0,s.kt)("li",{parentName:"ul"},"Autorisez les domaines sur lesquels vous d\xe9sirez installer Logora. Pour cela, rendez-vous sur votre espace d'administration dans l'onglet ",(0,s.kt)("em",{parentName:"li"},"Configuration > G\xe9n\xe9ral > S\xe9curit\xe9 > Domaines autoris\xe9s"),". Par exemple, si le code ins\xe9r\xe9 sur la page \xe0 l'URL ",(0,s.kt)("a",{parentName:"li",href:"https://exemple.com/article/exemple-article"},"https://exemple.com/article/exemple-article"),", ajoutez le domaine ",(0,s.kt)("a",{parentName:"li",href:"https://exemple.com."},"https://exemple.com.")," Exemple : http://localhost:3000 , ",(0,s.kt)("a",{parentName:"li",href:"http://sous-domaine.exemple.com."},"http://sous-domaine.exemple.com."),"  Important : l'ajout des domaines sur l'espace d'administration fonctionne comme un ajout de tag, n'oubliez pas d'appuyer sur \"Entrer\" lors de l'insertion de vos URL.")),(0,s.kt)("h3",{id:"1-installer-lespace-de-d\xe9bat"},"1. Installer l'espace de d\xe9bat"),(0,s.kt)("p",null,"L'espace de d\xe9bat est la plateforme principale o\xf9 vos utilisateurs pourront participer aux d\xe9bats. L'espace de d\xe9bat est ins\xe9r\xe9 sur une page d\xe9di\xe9e sur votre site. "),(0,s.kt)("p",null,"Prenons l'exemple d'un site web disponible \xe0 l'adresse ",(0,s.kt)("a",{parentName:"p",href:"https://votresite.com."},"https://votresite.com.")," L'\xe9diteur du site web souhaite acc\xe9der \xe0 l'espace de d\xe9bat via l'adresse ",(0,s.kt)("a",{parentName:"p",href:"https://votresite.com/espace-debat"},"https://votresite.com/espace-debat"),". Voici les \xe9tapes \xe0 suivre pour ins\xe9rer l'espace de d\xe9bat :"),(0,s.kt)("h4",{id:"11-ajouter-une-page-pour-ins\xe9rer-lespace-de-d\xe9bat"},"1.1. Ajouter une page pour ins\xe9rer l'espace de d\xe9bat"),(0,s.kt)("p",null,"Cr\xe9ez une page d\xe9di\xe9e o\xf9 sera ins\xe9r\xe9 l'espace de d\xe9bat. Cette page est disponible \xe0 l'adresse ",(0,s.kt)("a",{parentName:"p",href:"https://votresite.com/espace-debat"},"https://votresite.com/espace-debat"),". Le pr\xe9fixe 'espace-debat' est le pr\xe9fixe par d\xe9faut. Il est modifiable dans l'espace d'administration."),(0,s.kt)("h4",{id:"12-ins\xe9rer-le-code-javascript-et-vos-variables-de-configuration"},"1.2. Ins\xe9rer le code JavaScript et vos variables de configuration"),(0,s.kt)("p",null,"Ins\xe9rez les scripts n\xe9cessaires \xe0 l'espace de d\xe9bat ainsi qu'un conteneur ",(0,s.kt)("strong",{parentName:"p"},"logora_app"),". "),(0,s.kt)("p",null,"Le conteneur ",(0,s.kt)("strong",{parentName:"p"},"logora_app")," est l'endroit o\xf9 l'espace de d\xe9bat est affich\xe9."),(0,s.kt)("p",null,"Code standard \xe0 copier/coller et compl\xe9ter : "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- Ins\xe9rer les scripts suivants dans la balise <head>, le plus haut possible dans la page --\x3e\n<script>\n    // Variables de configuration, le nom d\'application est pr\xe9sent dans votre espace d\'administration\n    var logora_config = {\n        shortname: "NOM_APPLICATION"\n    };\n<\/script>\n<script src="https://api.logora.fr/debat.js"><\/script>\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- Ins\xe9rer cette balise l\xe0 o\xf9 l\'espace de d\xe9bat doit \xeatre affich\xe9 --\x3e\n<div id="logora_app"></div>\n')),(0,s.kt)("h4",{id:"13-r\xe9\xe9criture-des-urls-pour-les-routes-de-lespace-de-d\xe9bat"},"1.3. R\xe9\xe9criture des URLs pour les routes de l'espace de d\xe9bat"),(0,s.kt)("p",null,"Cette \xe9tape permet aux utilisateurs d'acc\xe9der \xe0 l'espace de d\xe9bat directement depuis leur navigateur.\nPar exemple, si un utilisateur souhaite acc\xe9der directement \xe0 son profil via l'URL ",(0,s.kt)("a",{parentName:"p",href:"https://www.votresite.com/espace-debat/utilisateur/votre-profil"},"https://www.votresite.com/espace-debat/utilisateur/votre-profil"),", sans proc\xe9der \xe0 la r\xe9\xe9criture des URLs, il sera redirig\xe9 vers une page d'erreur. "),(0,s.kt)("p",null,"La r\xe9\xe9criture des URLs permet \xe9galement \xe0 l'\xe9quipe Logora de rajouter directement de nouveaux modules sur de nouvelles URLs de votre site sans vous demander d'intervenir. "),(0,s.kt)("p",null,"Utilisez la r\xe9\xe9criture d'URL sur votre plateforme ou CMS pour que les chemins commen\xe7ant par 'espace-debat/' (ou le pr\xe9fixe que vous avez choisi) pointent vers la page o\xf9 est ins\xe9r\xe9 l'espace de d\xe9bat."),(0,s.kt)("p",null,"Acc\xe9dez \xe0 la page ",(0,s.kt)("a",{parentName:"p",href:"https://votresite.com/espace-debat/debats"},"https://votresite.com/espace-debat/debats"),". Vous \xeates sur la page d'accueil de l'espace de d\xe9bat !"),(0,s.kt)("p",null,"Pour modifier le pr\xe9fixe et les chemins d'URLs des pages de l'espace de d\xe9bat, rendez-vous sur ",(0,s.kt)("a",{parentName:"p",href:"/configuration/routes"},"la configuration des chemins d'URL"),"."),(0,s.kt)("h3",{id:"2-installer-la-synth\xe8se-du-d\xe9bat"},"2. Installer la synth\xe8se du d\xe9bat"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Si avez des contraintes de performance \xe9lev\xe9 et que vous souhaitez indexer les pages de d\xe9bat sur les moteurs de recherche, il est n\xe9cessaire d'ins\xe9rer la synth\xe8se c\xf4t\xe9 serveur. Dans ce cas rendez-vous sur la page d'",(0,s.kt)("a",{parentName:"p",href:"/installation/server-side-sdk"},"installation c\xf4t\xe9 serveur"),".")),(0,s.kt)("p",null,"Ins\xe9rez le code Javascript de la synth\xe8se \xe0 l'endroit o\xf9 vous souhaitez voir appara\xeetre la synth\xe8se du d\xe9bat, en pied d'article. Ceci est un exemple de code Javascript qui charge et affiche la synth\xe8se du d\xe9bat en cours li\xe9 \xe0 votre article. Il doit \xeatre ins\xe9r\xe9 sur toutes vos pages d'articles. Ce code n'affichera rien tant que vous n'avez pas associ\xe9 de d\xe9bat \xe0 la page."),(0,s.kt)("h4",{id:"21-ins\xe9rer-le-code-javascript-et-vos-variables-de-configuration"},"2.1 Ins\xe9rer le code JavaScript et vos variables de configuration"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Si vous souhaitez utiliser le widget, utilisez l'autre lien indiqu\xe9 dans le code Javascript exemple")),(0,s.kt)("p",null,"Le conteneur ",(0,s.kt)("strong",{parentName:"p"},"logora_synthese")," est l'endroit o\xf9 la synth\xe8se est charg\xe9e."),(0,s.kt)("p",null,"Code standard \xe0 copier/coller et compl\xe9ter :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},"<div class=\"logora_synthese\" data-object-id=\"logora_config\"></div>\n<script>\n    // Variables de configuration\n    var logora_config = {\n        shortname: \"NOM_APPLICATION\", // Nom d'application pr\xe9sent dans votre espace d'administration\n        debate: {\n            identifier: \"PAGE_IDENTIFIER\" // Identifiant unique de la page\n        }\n    };\n\n    (function() {\n        var d = document, s = d.createElement('script');\n        s.src = 'https://api.logora.fr/synthese.js'; // 'https://api.logora.fr/widget.js' pour le widget\n        (d.head || d.body).appendChild(s);\n    })();\n<\/script>\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"debate.identifier (requis)")," : identifiant unique li\xe9 \xe0 la page. Cet identifiant doit \xeatre unique pour chaque page o\xf9 est ins\xe9r\xe9e la synth\xe8se. Il permettra de r\xe9cup\xe9rer le d\xe9bat correspondant \xe0 la page. Par exemple, l'identifiant peut \xeatre l'ID dans votre base de donn\xe9es de l'article pr\xe9sent sur la page, ou un slug unique ('exemple-identifiant')."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Pour des raisons de performance, les articles publi\xe9es il y a plus de 18 mois ne sont pas r\xe9cup\xe9r\xe9s. La synth\xe8se ne s'affichera pas.")),(0,s.kt)("p",null,"Le d\xe9bat li\xe9 \xe0 la page doit ensuite \xeatre cr\xe9\xe9 dans l'espace d'administration > cr\xe9er un d\xe9bat, en fournissant l'identifiant debate.identifier ou en s\xe9lectionnant l'article concern\xe9 dans la liste des derniers articles r\xe9cup\xe9r\xe9s. "),(0,s.kt)("h4",{id:"22-envoyer-les-m\xe9ta-donn\xe9es-des-articles-manuellement-optionnel"},"2.2 Envoyer les m\xe9ta-donn\xe9es des articles manuellement (optionnel)"),(0,s.kt)("p",null,"Par d\xe9faut, Logora r\xe9cup\xe8re les m\xe9ta-donn\xe9es des articles automatiquement :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"via les balises html ",(0,s.kt)("em",{parentName:"li"},"meta")),(0,s.kt)("li",{parentName:"ul"},"via le format JSON-LD")),(0,s.kt)("p",null,"Cependant vous pouvez choisir de les envoyer manuellement avec les variables de configuration."),(0,s.kt)("p",null,"Voici un exemple de meta-donn\xe9es envoy\xe9es depuis les variables de configuration :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},'    // Variables de configuration\n    var logora_config = {\n    shortname: "NOM_APPLICATION", // Nom d\'application pr\xe9sent dans votre espace d\'administration\n    debate: {\n        identifier: "PAGE_IDENTIFIER" // Identifiant unique de la page\n    },\n    source: {\n        source_url: "https://votresite.com/article", // URL canonique de la page\n        uid: "a3f4e033-9e13-4abb-be11-2d87a2294013", // Identifiant unique de la page\n        title: "Titre de l\'article", // Titre de la page\n        description: "Description de la page", // Description de la page\n        origin_image_url: "https://image.com/image.png", // URL de l\'image de la page\n        published_date: "2020-12-01T12:00:00+01:00", // Date de publication de la page au format ISO_8601\n        publisher: "Mon site", // Nom du site\n        tag_objects: [  // \xc9tiquettes de l\'article sous forme de tableau d\'objets\n        { \n          name: "politique",  // Nom affich\xe9 de l\'\xe9tiquette\n          uid: "politique-001" // Identifiant unique de l\'\xe9tiquette. Peut \xeatre omis si les noms sont d\xe9j\xe0 uniques\n        }, \n        { \n          name: "sant\xe9", \n          uid: "sante-003" \n        },\n        ]\n      }\n    };\n')),(0,s.kt)("p",null,"Il n'est pas obligatoire d'envoyer toutes les m\xe9ta-donn\xe9es manuellement, les champs manquants seront r\xe9cup\xe9r\xe9s automatiquement. Les m\xe9tadonn\xe9es envoy\xe9es manuellement ont la priorit\xe9 sur les donn\xe9es r\xe9cup\xe9r\xe9es automatiquement."),(0,s.kt)("h4",{id:"\xe9couter-le-chargement-de-la-synth\xe8se-optionnel"},"\xc9couter le chargement de la synth\xe8se (optionnel)"),(0,s.kt)("p",null,"Pour d\xe9tecter le chargement de la synth\xe8se, un \xe9v\xe9nement ",(0,s.kt)("em",{parentName:"p"},"logoraContentLoaded")," est d\xe9clench\xe9 sur l'objet ",(0,s.kt)("em",{parentName:"p"},"window"),".\nCet \xe9v\xe9nement permet de r\xe9cup\xe9rer des informations sur le d\xe9bat qui s'affiche sur la page."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},"window.addEventListener('logoraContentLoaded', event => console.log(event.detail));\n")),(0,s.kt)("p",null,"Format de l'objet ",(0,s.kt)("em",{parentName:"p"},"event.detail")," :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'debate: {\n  direct_url: "https://www.exemple.fr/espace-debat/debat/mon-debat",\n  id: 1000\n  name: "Faut-il changer la constitution ?"\n  slug: "mon-debat"\n}\n')),(0,s.kt)("p",null,"Si aucun d\xe9bat n'est associ\xe9 \xe0 la page, l'objet ",(0,s.kt)("em",{parentName:"p"},"debate")," sera ",(0,s.kt)("em",{parentName:"p"},"null"),"."),(0,s.kt)("p",null,"Il ne reste plus qu'\xe0 impl\xe9menter l'authentification unique et \xe0 personnaliser Logora pour lancer votre premier d\xe9bat."))}m.isMDXComponent=!0}}]);