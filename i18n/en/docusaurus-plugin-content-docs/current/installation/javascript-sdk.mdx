---
id: javascript-sdk
title: Installation Javascript
description: Install Logora using our universal Javascript code.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from '@theme/CodeBlock';
import styles from '../../../../../docs/installation/styles.module.css';
import styles from './styles.module.css';


Logora can be installed on any site by inserting the native JavaScript code. This documentation is intended for developers. Logora also offers custom documentation for [Wordpress installation](../wordpress).

Javascript installation is a two-stage process:

1. Insert the discussion forum
2. Insert the summary of the debate on your article pages

### Before you start

- If the Logora team has not created an administration space for you, create your Logora administration space: [Register](https://admin.logora.fr/#/signup)
- Get your **application name** available on your [administration space](https://admin.logora.fr) in the tab _Configuration > General_.
- Authorise the domains on which you wish to install Logora. To do this, go to your administration space in the tab _Configuration > General > Security > Authorised domains_. For example, if the code inserted on the page has the URL *https://exemple.com/article/exemple-article*, add the domain *https://exemple.com*. Example: _http://localhost:3000_ , *http://sous-domaine.exemple.com*. 

Important: adding domains to the administration space works like adding a tag, so don't forget to press "Enter" when inserting your URLs.

### 1. Setting up the discussion forum

The debate area is the main platform where your users can take part in debates. The discussion forum is inserted on a dedicated page on your site.

Let's take the example of a website available at the address *https://votresite.com*. The website editor would like to access the discussion forum via the address *https://votresite.com/espace-debat*. Here are the steps to follow to insert the discussion forum:

#### 1.1. Add a page to insert the discussion forum

Create a dedicated page on which to insert the discussion forum. This page is available at *https://votresite.com/espace-debat*. The 'debate-space' prefix is the default. You can change it in the administration area.

#### 1.2. Insert the JavaScript code and your configuration variables

Insert the scripts required for the discussion forum and a **logora_app** container.

The **logora_app** container is where the discussion forum is displayed.

Standard code to copy/paste and complete:

```html
<!-- Insert the following scripts in the <head> tag, as high up in the page as possible -->
<script>
  // Configuration variables, the application name is available in your administration space
  var logora_config = {
    shortname: "APPLICATION_NAME",
  };
</script>
<script src="https://cdn.logora.com/debat.js"></script>
```

```html
<!-- Insert this tag where the debate space is to be displayed -->
<div id="logora_app"></div>
```

#### 1.3. Rewriting the URLs for the debate area routes

This step enables users to access the discussion forum directly from their browser.
For example, if a user wishes to access their profile directly via the URL *https://www.votresite.com/espace-debat/utilisateur/votre-profil*, without rewriting the URLs, they will be redirected to an error page.

URL rewriting also allows the Logora team to add new modules directly to new URLs on your site without asking you to intervene.

Use URL rewriting on your platform or CMS so that paths starting with 'debate-space/' (or your chosen prefix) point to the page where the debate space is inserted.

Go to *https://votresite.com/espace-debat/debats*. You are now on the discussion index homepage!

To change the prefix and URL paths of the debate forum pages, go to [URL path configuration](configuration/routes.md).

### 2. Install the contributor block in your articles

>If you have high performance constraints and want to index the debate pages on search engines, you need to insert this block on the server side. In this case, go to the [server-side installation] page (installation/api.md).

Insert the Javascript code where you want the calls to action to appear (comments, debate or consultation questions). This block is often inserted after the article, but it can be added inside the article if certain constraints prevent you from adding new functionalities after the article. This is an example of the Javascript code that loads and displays the block in your article. It must be inserted on all your article pages.

#### 2.1 Insert JavaScript code

The **logora_embed** container is where the block is loaded.

Standard code to copy/paste and complete:

```javascript
<div class="logora_embed" data-object-id="logora_config"></div>
<script>
    // Configuration variables
    var logora_config = {
        shortname: "APPLICATION_NAME", // Application name in your administration space
        resource: {
            name: "synthesis",
            id: "PAGE_IDENTIFIER" // Unique identifier for the page
        }
    };

    (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://cdn.logora.com/embed.js';
        (d.head || d.body).appendChild(s);
    })();
</script>
```

**resource.id (required)**: unique identifier linked to the page. This identifier must be unique for each page where the block is inserted. It will be used to retrieve the call for contributions corresponding to the page. For example, the identifier can be the ID in your database of the article on the page, or a unique slug ('example-identifier').

> For performance reasons, articles published more than 18 months ago are not retrieved. The synthesis will not be displayed.

To create a debate linked to the page, go to the administration area > create a debate and select the desired article from the list of recently retrieved articles.

#### 2.2 Configurer l'appel à l'action que vous souhaitez

Changer le contenu de l'objet _resource_ vous permet de spécifier ce que vous souhaitez insérer dans l'article.

Le name indique le plus souvent la valeur "synthesis".

<CodeBlock language="javascript">
    {`
        resource: {
            name: "synthesis",
            id: "PAGE_IDENTIFIER" // Identifiant unique de la page
        }
    `}
</CodeBlock>
<p style={{ marginTop: "1em" }}>
    Vous pouvez explorer dans les onglets suivants toutes les possibilités d'affichage que propose l'objet resource.
</p>

<Tabs className={styles.uniqueTabs}>
    <TabItem value="Synthesis" label="Synthesis" default attributes={{className: styles.tabItem}}>
        <div>
            La valeur synthesis est la valeur qui est utilisée dans la très grande majorité des cas par nos partenaires. L'ID est l'identifiant de l'article. Synthesis permet d'afficher une question de débat lorsqu'un débat est lié à l'article comme ici :
            <figure> 
                <img src="/img/synthese.png" alt="Marianne synthèse" /> 
            </figure>
            Si aucun débat n'est lié à l'article, vous pouvez décider d'afficher des commentaires à la place, en autorisant l'ajout dans commentaires dans la configuration de l'espace d'administration.
            <h4>Optionnel : Permettre l'ajout de commentaires lorsqu'aucun débat n'est lié à l'article</h4>
            Vous pouvez activer un espace de commentaires sur votre espace contributif depuis votre espace d'administration <i>Configuration > Modules</i>.
            Voici <a href="https://www.loom.com/share/f36e14002c3a456f85aed8484f9fb7ed" target="_blank">une vidéo</a> démo concernant l'installation des commentaires et les visuels proposés aux lecteurs.
            <figure> 
                <img src="https://github.com/Logora/LogoraDocumentation/assets/28570918/529423a0-eaf6-4736-8174-64c3c303b9b4" /> 
            </figure>
            Par défaut, cela activera un bandeau simple présentant un appel à l'action "Vous souhaitez réagir à cet article ? Commentez".
            Un <a href="https://www.marianne.net/agora/avis-aux-lecteurs-rejoignez-notre-espace-logora-et-devenez-le-debatteur-a-suivre" target="_blank">exemple sur Marianne ici</a>
            <figure> 
                <img src="https://github.com/Logora/LogoraDocumentation/assets/28570918/bb31dd2b-b7f6-46c3-8757-b7dbbccdf186" /> 
            </figure>
            Pour générer davantage d'interactions, vous pouvez choisir de présenter les meilleurs commentaires en plus de l'appel à l'action (1, 2 ou 3).
            Cette option est à favoriser si vous avez la possibilité de donner plus de place aux commentaires.
            Un exemple sur Milenio avec 3 commentaires affichés :
            <figure> 
                <img src="https://github.com/Logora/LogoraDocumentation/assets/28570918/c8a9421a-0c03-471b-9641-d12fb444ec31" /> 
            </figure>
            Un comportement recommandé : ils affichent le nombre de commentaires en haut de l'article avec la possibilité de cliquer sur l'icône commenter ce qui permet de descendre automatiquement vers les commentaires.
            <figure> 
                <img src="https://github.com/Logora/LogoraDocumentation/assets/28570918/eabed076-0667-42d6-b89f-584c89202bc0" /> 
            </figure>
        </div>
    </TabItem>
    <TabItem value="Widget" label="Widget" attributes={{className: styles.tabItem}}>
        <CodeBlock language="javascript">
            {`
                resource: {
                    name: "widget",
                    id: "PAGE_IDENTIFIER" // Identifiant unique de la page
                }
            `}
        </CodeBlock>
        <p style={{ marginTop: "1em" }}>
            Ce code propose la même chose que synthèse mais la question de débat s'affiche avec un format en une ligne. L'ID est l'identifiant de l'article.
        </p>
        <figure> 
            <img src="/img/synthese_widget.png" /> 
        </figure>
    </TabItem>
    <TabItem value="Commentaires" label="Commentaires" attributes={{className: styles.tabItem}}>
        <CodeBlock language="javascript">
            {`
                resource: {
                    name: "comments",
                    id: "SOURCE_IDENTIFIER" // Identifiant unique de la page
                }
            `}
        </CodeBlock>
        <p style={{ marginTop: "1em" }}>
            L'ID est l'identifiant de l'article. 
            Ce code propose d'afficher uniquement des commentaires, sans la fonctionnalité des débats.
        </p>
    </TabItem>
    <TabItem value="Vote" label="Vote" attributes={{className: styles.tabItem}}>
        <CodeBlock language="javascript">
            {`
                resource: {
                    name: "vote",
                    id: "vote" // Pas d'ID ici
                }
            `}
        </CodeBlock>
        <p style={{ marginTop: "1em" }}>
            Pas d'ID à passer ici. 
            Vote permet d'épingler un débat ou d'afficher le dernier créer.
        </p> 
    </TabItem>
    <TabItem value="Group" label="Group" attributes={{className: styles.tabItem}}>
        <CodeBlock language="javascript">
            {`
                resource: {
                    name: "group",
                    id: "DEBATE_IDENTIFIER" // Identifiant du débat
                }
            `}
        </CodeBlock>
        <p style={{ marginTop: "1em" }}>
            L'ID correspond ici à celui du débat. Group permet d'afficher un débat en particulier via son ID.
        </p>
    </TabItem>
    <TabItem value="Consultation" label="Consultation" attributes={{className: styles.tabItem}}>
       <CodeBlock language="javascript">
            {`
                resource: {
                    name: "consultation",
                    id: "CONSULTATION_IDENTIFIER" // Identifiant unique de la consultation
                }
            `}
        </CodeBlock>
        <p style={{ marginTop: "1em" }}>
            L'ID correspond ici à celui de la consultation. Group permet d'afficher une consultation en particulier via son ID.
        </p>
    </TabItem>
    <TabItem value="Arguments" label="Arguments" attributes={{className: styles.tabItem}}>
        <CodeBlock language="javascript">
            {`
                resource: {
                    name: "argument", // Valeur alternative: "proposition"
                    id: "ARGUMENT_IDENTIFIER" // Identifiant unique de la contribution
                }
            `}
        </CodeBlock>
        <p style={{ marginTop: "1em" }}>
            L'ID correspond ici à celui de l'argument ou de la proposition. Argument ou proposal permet d'afficher un arugment ou une proposition en particulier via son ID. 
        </p>
  </TabItem>
</Tabs>

#### 2.3 Afficher plusieurs blocs dans la page article (optionnel)

S'il y a plusieurs blocs dans la page, le script embed.js ne doit être inséré qu'une seule fois.
Dans ce cas-là, il faut créer un objet de configuration par bloc, et mettre le nom dans "data-object-id". Exemple pour insérer une question de débat et des commentaires dans la même page :

```javascript
// Conteneur de chaque bloc
<div class="logora_embed" data-object-id="logora_config"></div>
<div class="logora_embed" data-object-id="logora_config_2"></div>

// Configuration
<script>
    // Variables de configuration
    var logora_config = {
        shortname: "NOM_APPLICATION",
        resource: {
            name: "synthese",
            id: "PAGE_IDENTIFIER" // Identifiant unique de la page
        }
    };

    var logora_config_2 = {
        shortname: "NOM_APPLICATION",
        resource: {
            name: "comments",
            id: "PAGE_IDENTIFIER" // Identifiant unique de la page
        }
    };

    // Le script n'est inséré qu'une fois même s'il y a deux blocs
    (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://cdn.logora.com/embed.js';
        (d.head || d.body).appendChild(s);
    })();
</script>
```

Dans ce cas, la synthèse et les commentaires s'afficheront à l'endroit de l'insertion de :

```javascript
<div class="logora_embed" data-object-id="logora_config"></div>
<div class="logora_embed" data-object-id="logora_config_2"></div>
```

#### 2.4 Envoyer les méta-données des articles manuellement (optionnel)

Par défaut, Logora récupère les méta-données des articles automatiquement :

- via les balises html _meta_
- via le format JSON-LD

Cependant vous pouvez choisir de les envoyer manuellement avec les variables de configuration.

Voici un exemple de meta-données envoyées depuis les variables de configuration :

```javascript
// Variables de configuration
var logora_config = {
  shortname: "NOM_APPLICATION", // Nom d'application présent dans votre espace d'administration
  debate: {
    identifier: "PAGE_IDENTIFIER", // Identifiant unique de la page
  },
  source: {
    source_url: "https://votresite.com/article", // URL canonique de la page
    uid: "a3f4e033-9e13-4abb-be11-2d87a2294013", // Identifiant unique de la page
    title: "Titre de l'article", // Titre de la page
    description: "Description de la page", // Description de la page
    origin_image_url: "https://image.com/image.png", // URL de l'image de la page
    published_date: "2020-12-01T12:00:00+01:00", // Date de publication de la page au format ISO_8601
    publisher: "Mon site", // Nom du site
    tag_objects: [
      // Étiquettes de l'article sous forme de tableau d'objets
      {
        name: "politique", // Nom affiché de l'étiquette
        uid: "politique-001", // Identifiant unique de l'étiquette. Peut être omis si les noms sont déjà uniques
      },
      {
        name: "santé",
        uid: "sante-003",
      },
    ],
  },
};
```

Il n'est pas obligatoire d'envoyer toutes les méta-données manuellement, les champs manquants seront récupérés automatiquement. Les métadonnées envoyées manuellement ont la priorité sur les données récupérées automatiquement.

#### Écouter le chargement de la synthèse (optionnel)

Pour détecter le chargement de la synthèse, un événement _logoraContentLoaded_ est déclenché sur l'objet _window_.
Cet événement permet de récupérer des informations sur le contenu qui s'affiche sur la page.

```javascript
window.addEventListener("logoraContentLoaded", (event) =>
  console.log(event.detail)
);
```

Format de l'objet _event.detail_ :

```javascript
debate: {
  id: 1000,
  name: "Faut-il changer la constitution ?", // Titre de la consultation ou de l'article pour les commentaires
  slug: "mon-debat",
  direct_url: "https://www.exemple.fr/espace-debat/debat/mon-debat",
  created_at: "2023-03-16T09:36:31.204Z",
  image_url: "https://image.com/debate",
  type: "Group", // "Source" pour les commentaires, "Consultation" pour les consultations
  contributions_count: 12 // Seulement pour les commentaires, nombre de commentaires
}
```

Si aucun débat n'est associé à la page, l'objet _debate_ sera _null_.

Il ne reste plus qu'à implémenter l'authentification unique et à personnaliser Logora pour lancer votre premier débat.
