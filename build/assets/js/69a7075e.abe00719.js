"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[25],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>v});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,v=u["".concat(l,".").concat(m)]||u[m]||c[m]||s;return a?n.createElement(v,i(i({ref:t},d),{},{components:a})):n.createElement(v,i({ref:t},d))}));function v(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,i=new Array(s);i[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:r,i[1]=o;for(var p=2;p<s;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2745:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>p,toc:()=>u});var n=a(7462),r=a(3366),s=(a(7294),a(3905)),i=["components"],o={id:"server-side-sdk",title:"Installation c\xf4t\xe9 serveur",description:"Ins\xe9rez Logora c\xf4t\xe9 serveur gr\xe2ce \xe0 notre API"},l=void 0,p={unversionedId:"installation/server-side-sdk",id:"installation/server-side-sdk",title:"Installation c\xf4t\xe9 serveur",description:"Ins\xe9rez Logora c\xf4t\xe9 serveur gr\xe2ce \xe0 notre API",source:"@site/docs/installation/api.md",sourceDirName:"installation",slug:"/installation/server-side-sdk",permalink:"/installation/server-side-sdk",draft:!1,tags:[],version:"current",frontMatter:{id:"server-side-sdk",title:"Installation c\xf4t\xe9 serveur",description:"Ins\xe9rez Logora c\xf4t\xe9 serveur gr\xe2ce \xe0 notre API"},sidebar:"docs",previous:{title:"Installation Wordpress",permalink:"/installation/wordpress"},next:{title:"Google AMP SDK",permalink:"/installation/amp-sdk"}},d={},u=[{value:"Avant de commencer",id:"avant-de-commencer",level:3},{value:"1. Installer l&#39;espace de d\xe9bat",id:"1-installer-lespace-de-d\xe9bat",level:3},{value:"1.1. Ajouter une page pour ins\xe9rer l&#39;espace de d\xe9bat",id:"11-ajouter-une-page-pour-ins\xe9rer-lespace-de-d\xe9bat",level:4},{value:"1.2. Ins\xe9rer le code JavaScript et vos variables de configuration",id:"12-ins\xe9rer-le-code-javascript-et-vos-variables-de-configuration",level:4},{value:"1.3. R\xe9\xe9criture des URLs pour les routes de l&#39;espace de d\xe9bat",id:"13-r\xe9\xe9criture-des-urls-pour-les-routes-de-lespace-de-d\xe9bat",level:4},{value:"2. R\xe9cup\xe9ration du code de la synth\xe8se",id:"2-r\xe9cup\xe9ration-du-code-de-la-synth\xe8se",level:3},{value:"Requ\xeate",id:"requ\xeate",level:4},{value:"R\xe9ponse",id:"r\xe9ponse",level:4},{value:"R\xe9cup\xe9rer la liste des articles (optionnel)",id:"r\xe9cup\xe9rer-la-liste-des-articles-optionnel",level:3},{value:"Requ\xeate",id:"requ\xeate-1",level:4},{value:"R\xe9ponse",id:"r\xe9ponse-1",level:4}],c={toc:u};function m(e){var t=e.components,a=(0,r.Z)(e,i);return(0,s.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"Logora peut \xeatre install\xe9 sur n'importe quel site en ins\xe9rant les pages de d\xe9bat en code natif JavaScript et en ins\xe9rant la question en pied d'article (la synth\xe8se) c\xf4t\xe9 serveur. Cette installation permet d'am\xe9liorer la performance de vos pages articles et d'indexer les pages de d\xe9bat sur les moteurs de recherche. "),(0,s.kt)("p",null,"Cette documentation est \xe0 destination des d\xe9veloppeurs. Logora propose \xe9galement une documentation personnalis\xe9e pour l'",(0,s.kt)("a",{parentName:"p",href:"installation/wordpress"},"installation Wordpress"),"."),(0,s.kt)("p",null,"L'installation se fait en deux temps :"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Ins\xe9rer l'espace de d\xe9bat en Javascript"),(0,s.kt)("li",{parentName:"ol"},"Ins\xe9rer la synth\xe8se du d\xe9bat sur vos pages c\xf4t\xe9 serveur\n")),(0,s.kt)("h3",{id:"avant-de-commencer"},"Avant de commencer"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Si l'\xe9quipe Logora ne vous a pas cr\xe9\xe9 d'espace d'administration, cr\xe9ez votre espace d'administration Logora : ",(0,s.kt)("a",{parentName:"li",href:"https://logora.fr/signup"},"Inscription")),(0,s.kt)("li",{parentName:"ul"},"Munissez-vous de votre ",(0,s.kt)("strong",{parentName:"li"},"nom d'application")," disponible sur votre ",(0,s.kt)("a",{parentName:"li",href:"https://admin.logora.fr"},"espace d'administration")," dans l'onglet ",(0,s.kt)("em",{parentName:"li"},"Configuration > G\xe9n\xe9ral"),"."),(0,s.kt)("li",{parentName:"ul"},"Autorisez les domaines sur lesquels vous d\xe9sirez installer Logora. Pour cela, rendez-vous sur votre espace d'administration dans l'onglet ",(0,s.kt)("em",{parentName:"li"},"Configuration > G\xe9n\xe9ral > S\xe9curit\xe9 > Domaines autoris\xe9s"),". Par exemple, si le code ins\xe9r\xe9 sur la page \xe0 l'URL ",(0,s.kt)("a",{parentName:"li",href:"https://exemple.com/article/exemple-article"},"https://exemple.com/article/exemple-article"),", ajoutez le domaine ",(0,s.kt)("a",{parentName:"li",href:"https://exemple.com."},"https://exemple.com.")," Exemple : http://localhost:3000 , ",(0,s.kt)("a",{parentName:"li",href:"http://sous-domaine.exemple.com."},"http://sous-domaine.exemple.com."),"  Important : l'ajout des domaines sur l'espace d'administration fonctionne comme un ajout de tag, n'oubliez pas d'appuyer sur \"Entrer\" lors de l'insertion de vos URL.")),(0,s.kt)("h3",{id:"1-installer-lespace-de-d\xe9bat"},"1. Installer l'espace de d\xe9bat"),(0,s.kt)("p",null,"L'espace de d\xe9bat est la plateforme principale o\xf9 vos utilisateurs pourront participer aux d\xe9bats. L'espace de d\xe9bat est ins\xe9r\xe9 sur une page d\xe9di\xe9e sur votre site. "),(0,s.kt)("p",null,"Prenons l'exemple d'un site web disponible \xe0 l'adresse ",(0,s.kt)("a",{parentName:"p",href:"https://votresite.com."},"https://votresite.com.")," L'\xe9diteur du site web souhaite acc\xe9der \xe0 l'espace de d\xe9bat via l'adresse ",(0,s.kt)("a",{parentName:"p",href:"https://votresite.com/espace-debat"},"https://votresite.com/espace-debat"),". Voici les \xe9tapes \xe0 suivre pour ins\xe9rer l'espace de d\xe9bat :"),(0,s.kt)("h4",{id:"11-ajouter-une-page-pour-ins\xe9rer-lespace-de-d\xe9bat"},"1.1. Ajouter une page pour ins\xe9rer l'espace de d\xe9bat"),(0,s.kt)("p",null,"Cr\xe9ez une page d\xe9di\xe9e o\xf9 sera ins\xe9r\xe9 l'espace de d\xe9bat. Cette page est disponible \xe0 l'adresse ",(0,s.kt)("a",{parentName:"p",href:"https://votresite.com/espace-debat"},"https://votresite.com/espace-debat"),". Le pr\xe9fixe 'espace-debat' est le pr\xe9fixe par d\xe9faut. Il est modifiable dans l'espace d'administration."),(0,s.kt)("h4",{id:"12-ins\xe9rer-le-code-javascript-et-vos-variables-de-configuration"},"1.2. Ins\xe9rer le code JavaScript et vos variables de configuration"),(0,s.kt)("p",null,"Ins\xe9rez le code Javascript du d\xe9bat \xe0 l'endroit o\xf9 vous souhaitez voir appara\xeetre l'espace de d\xe9bat. "),(0,s.kt)("p",null,"Le conteneur ",(0,s.kt)("strong",{parentName:"p"},"logora_app")," est l'endroit o\xf9 l'espace de d\xe9bat est charg\xe9."),(0,s.kt)("p",null,"Code standard \xe0 copier/coller et compl\xe9ter : "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},"<div id=\"logora_app\"></div>\n<script>\n    // Variables de configuration\n    var logora_config = {\n        shortname: \"NOM_APPLICATION\" // Nom d'application pr\xe9sent dans votre espace d'administration\n    };\n\n    (function() {\n        var d = document, s = d.createElement('script');\n        s.src = 'https://api.logora.fr/debat.js';\n        (d.head || d.body).appendChild(s);\n    })();\n<\/script>\n")),(0,s.kt)("h4",{id:"13-r\xe9\xe9criture-des-urls-pour-les-routes-de-lespace-de-d\xe9bat"},"1.3. R\xe9\xe9criture des URLs pour les routes de l'espace de d\xe9bat"),(0,s.kt)("p",null,"Utilisez la r\xe9\xe9criture d'URL sur votre plateforme ou CMS pour que les chemins commen\xe7ant par 'espace-debat/' (ou le pr\xe9fixe que vous avez choisi) pointent vers la page o\xf9 est ins\xe9r\xe9 l'espace de d\xe9bat."),(0,s.kt)("p",null,"Acc\xe9dez \xe0 la page ",(0,s.kt)("a",{parentName:"p",href:"https://votresite.com/espace-debat/debats"},"https://votresite.com/espace-debat/debats"),". Vous \xeates sur la page d'accueil de l'espace de d\xe9bat !"),(0,s.kt)("p",null,"Pour modifier le pr\xe9fixe et les chemins d'URLs des pages de l'espace de d\xe9bat, rendez-vous sur ",(0,s.kt)("a",{parentName:"p",href:"/configuration/routes"},"la configuration des chemins d'URL"),"."),(0,s.kt)("h3",{id:"2-r\xe9cup\xe9ration-du-code-de-la-synth\xe8se"},"2. R\xe9cup\xe9ration du code de la synth\xe8se"),(0,s.kt)("p",null,"Logora fournit une route d'API pour r\xe9cup\xe9rer la synth\xe8se dans vos pages c\xf4t\xe9 serveur. Cette route d'API renvoie le code HTML complet de la synth\xe8se (CSS et scripts inclus), que vous pouvez ins\xe9rer dans votre mod\xe8le de page. Cette m\xe9thode remplace l'insertion du script Logora sur vos pages."),(0,s.kt)("p",null,"Pour acc\xe9der \xe0 une documentation plus d\xe9taill\xe9e de l'API de pr\xe9-rendu, rendez-vous sur la ",(0,s.kt)("a",{parentName:"p",href:"https://render.logora.fr/docs"},"Documentation")),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Cette API est utilis\xe9e par ailleurs par le code Javascript Logora pour afficher la synth\xe8se.")),(0,s.kt)("h4",{id:"requ\xeate"},"Requ\xeate"),(0,s.kt)("p",null,"URL de base :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"https://render.logora.fr/synthesis")," pour la synth\xe8se  "),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"https://render.logora.fr/widget")," pour le widget")),(0,s.kt)("p",null,"M\xe9thode : ",(0,s.kt)("inlineCode",{parentName:"p"},"POST"),(0,s.kt)("br",{parentName:"p"}),"\n","En-t\xeate : ",(0,s.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,s.kt)("p",null,"Param\xe8tres d'URL :",(0,s.kt)("br",{parentName:"p"}),"\n",(0,s.kt)("inlineCode",{parentName:"p"},"shortname")," (requis) : nom de votre application disponible dans votre espace d'administration"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"uid")," (requis) : identifiant unique de la page"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"device")," (optionnel) : indique le type d'appareil de l'utilisateur. Les choix possibles sont : ",(0,s.kt)("inlineCode",{parentName:"p"},"mobile"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"tablet"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"desktop"),". Ce param\xe8tre est utilis\xe9 pour adapter le design du module en fonction de la taille de l'\xe9cran."),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"insertType")," (optionnel) : mode d'insertion, ne pas ajouter si insertion standard. Indiquer ",(0,s.kt)("em",{parentName:"p"},"amp")," pour une insertion sur une page AMP ou ",(0,s.kt)("em",{parentName:"p"},"iframe")," pour une insertion en iframe.  "),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"cache")," (optionnel) : ",(0,s.kt)("em",{parentName:"p"},"true")," ou ",(0,s.kt)("em",{parentName:"p"},"false"),". Permet de d\xe9sactiver le cache pour tester en environnement de d\xe9veloppement. Par d\xe9faut, les requ\xeates sont mises en cache quelques minutes. Ne pas d\xe9sactiver le cache en production."),(0,s.kt)("p",null,"Corps de la requ\xeate : Le corps de la requ\xeate doit contenir des m\xe9tadonn\xe9es sur la page, en format JSON."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "source": \n  {\n    "source_url": "https://votresite.com/article", // (Requis) URL canonique de la page\n    "uid": "a3f4e033-9e13-4abb-be11-2d87a2294013", // (Requis) Identifiant unique de la page\n    "title": "Titre de l\'article", // (Requis) Titre de la page\n    "description": "Description de la page", // (Optionnel) Description de la page\n    "origin_image_url": "https://image.com/image.png", // (Optionnel) URL de l\'image de la page\n    "published_date": "2020-12-01T12:00:00+01:00", // (Requis) Date de publication de la page au format ISO_8601\n    "publisher": "Mon site", // (Optionnel) Nom du site\n    "tag_objects": [  // (Optionnel) \xc9tiquettes de l\'article sous forme de tableau d\'objets\n        { \n          "name": "politique",  // (Requis) Nom affich\xe9 de l\'\xe9tiquette\n          "uid": "politique-001" // (Optionnel) Identifiant unique de l\'\xe9tiquette. Peut \xeatre omis si les noms sont d\xe9j\xe0 uniques\n        }, \n        { \n          "name": "sant\xe9", \n          "uid": "sante-003" \n        },\n    ]\n  }\n}\n')),(0,s.kt)("p",null,"Exemples d'URL de requ\xeate :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"https://render.logora.fr/synthesis?shortname=demo-app&uid=cc7c1624-9d5c-4206-b2d4-d18cb36c59d6\nhttps://render.logora.fr/synthesis?shortname=demo-app&uid=cc7c1624-9d5c-4206-b2d4-d18cb36c59d6&insertType=amp\n")),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Le param\xe8tre ",(0,s.kt)("inlineCode",{parentName:"p"},"source_url")," doit avoir un nom de domaine identique \xe0 un des domaines autoris\xe9s de votre application (modifiable dans ",(0,s.kt)("em",{parentName:"p"},"Configuration > G\xe9n\xe9ral"),"), sinon, la source envoy\xe9e ne sera pas prise en compte.")),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Pour des raisons de performance, les sources publi\xe9es il y a plus de 18 mois ne sont pas prises en compte.")),(0,s.kt)("h4",{id:"r\xe9ponse"},"R\xe9ponse"),(0,s.kt)("p",null,"La r\xe9ponse renvoy\xe9e est sous cette forme :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": true, // true si un d\xe9bat est associ\xe9, false si aucun d\xe9bat ou une erreur\n  "debate": {    \n    "slug": "mon-debat",    // Identifiant unique du d\xe9bat, pr\xe9sent dans l\'URL\n    "name": "Faut-il introduire une dose de proportionnelle dans l\'\xe9lection des d\xe9put\xe9s ?",     // Titre du d\xe9bat\n    "direct_url": "https://exemple.com/espace-debat/debat/mon-debat"      // Lien vers le d\xe9bat\n  },\n  "content": CODE_HTML, // Code HTML de la synth\xe8se \xe0 ins\xe9rer dans la page. Attribut non pr\xe9sent si success \xe0 false\n  "config": OBJET_CONFIG, // Objet contenant la configuration de l\'application\n}\n')),(0,s.kt)("p",null,"Le code HTML renvoy\xe9 a pour racine le conteneur suivant  : "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'<div id="logoraRoot" class="logoraContainer" lang="fr" data-id="synthesis"><div>\n')),(0,s.kt)("h3",{id:"r\xe9cup\xe9rer-la-liste-des-articles-optionnel"},"R\xe9cup\xe9rer la liste des articles (optionnel)"),(0,s.kt)("p",null,"Pour \xe9viter de faire des appels inutiles et charger la synth\xe8se uniquement sur les pages article o\xf9 un d\xe9bat est li\xe9, vous pouvez utiliser la route pr\xe9vue par l'API de Logora pour r\xe9cup\xe9rer la liste de vos articles li\xe9s \xe0 un d\xe9bat."),(0,s.kt)("h4",{id:"requ\xeate-1"},"Requ\xeate"),(0,s.kt)("p",null,"URL de base :\n",(0,s.kt)("inlineCode",{parentName:"p"},"https://app.logora.fr/api/v1/updated_sources")),(0,s.kt)("p",null,"M\xe9thode : ",(0,s.kt)("inlineCode",{parentName:"p"},"GET"),"\nEn-t\xeate : ",(0,s.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json"),"\nParam\xe8tres d'URL : "),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"shortname")," (requis) : nom de votre application disponible dans votre espace d'administration"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"timestamp")," (requis) : date depuis laquelle vous souhaitez r\xe9cup\xe9rer les mises \xe0 jour des articles (si un d\xe9bat est associ\xe9 ou non), en format timestamp Unix (secondes)."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"page")," (optionnel) : num\xe9ro de page"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"per_page")," (optionnel) : nombre d'\xe9l\xe9ments par page, par d\xe9faut 10")),(0,s.kt)("p",null,"La route renvoie l'ensemble des articles qui ont eu une modification d'association \xe0 un d\xe9bat depuis la date pass\xe9e en param\xe8tre."),(0,s.kt)("h4",{id:"r\xe9ponse-1"},"R\xe9ponse"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": true,\n  "data": {\n      {\n        "identifier": 1, // Identifiant unique de l\'article que vous fournissez lors de l\'insertion de la synth\xe8se\n        "title": "Exemple d\u2019Article \u2013 D\xe9mo", // Titre de l\'article\n        "source_url": "https://demo.logora.fr/article-demo", // URL de l\'article\n        "has_debate": false, // Indique si l\'article est associ\xe9 \xe0 un d\xe9bat\n        "debate_updated_at": "2021-01-06T16:01:19.717Z" // Derni\xe8re modification de l\'association \xe0 un d\xe9bat (association \xe0 un d\xe9bat ou suppression de l\'association)\n      },\n      {\n        "identifier": 2,\n        "title": "Exemple d\'article #2 - D\xe9mo",\n        "source_url": "https://demo.logora.fr/article2-demo",\n        "has_debate": true,\n        "debate_updated_at": "2021-01-06T15:22:32.630Z"\n      }, \n      ...\n  }\n}\n')),(0,s.kt)("p",null,"En-t\xeates de la r\xe9ponse :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"total")," : nombre total d'\xe9l\xe9ments (sans inclure la pagination)"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"total-pages")," : nombre de pages de la r\xe9ponse")))}m.isMDXComponent=!0}}]);